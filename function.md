## 函数

javascript是一门函数语言，编写代码水平核心取决于对函数的应用水平。

### 函数是第一型对象

* 可以通过字面量创建
* 可以赋值给变量、数组或其他对象的属性
* 可以作为参数传递给函数
* 可以作为函数的返回值返回
* 可以拥有动态创建并赋值的属性
* 可以被调用(invoke)，通常是以异步(asynchronous)方式调用


### 函数执行的单线程轮询机制

浏览器的事件轮询是单线程的，每个事件都按照在队列中放置的顺序来处理，其他事件只能等到这个事件处理结束以后才能继续处理。

我们的职责是为浏览器中发生的各种事件建立事件处理程序(handler)。


### 回调函数

定义：定义一个函数，以便其他一些代码在适当的时机回头再调用它。

下面这个例子将数组逆序排列，sort函数的参数是一个匿名的回调函数。
```javasript
var values = [ 234, 3234, 33, 134, 44, 39];
values.sort( (v1, v2) =>  v2 - v1  );
```

### 函数作用域

* 作用域由function进行声明，结束于function，但是不终结于代码块(其他语言终结于代码块)。
* 作用域内部，函数声明可以提升，也就是说可以在声明函数之前使用它
* 作用域内部，变量不可以提升，在定义之前是无效的

示例代码
```javascript
function outer() {
	var a = 1;
	function inner() {}
	var b = 2;
	if( a == 1 ) {
		var c = 3;
	}
}

outer();
```

### 函数调用

函数调用的由四种方法，每种方法都有细微差别需要把握。前三种方法都是通过在表达式后面添加一个小括号操作符来执行函数。`this`是函数的一个隐藏参数，具体含义依赖于调用方式，所以成为调用上下文(invocation context)

* 作为函数直接调用，`this`上下文是全局上下文`window`
* 作为对象的方法调用, `this`上下文是对应的对象
* 作为构造器，创建新对象，`this`上下文在函数里面新建出来，并返回
* 通过`apply()`或`call()`方法调用，可以指定上下文


### 传参

参数个数和声明的个数不一样，不会报错

* 传递参数大于声明参数，超出的参数不会分配给形参使用
* 传递参数小于声明参数，没有对应的形参会赋值为`undefined` 
* `arguments`是一个隐藏参数，可以用部分类似数组的语法使用

### 构造函数

当构造函数被调用时，它创建一个新的空对象，并以`this`指向他，成为构造函数的上下文，最后将这个对象作为返回值返回。

* 普通函数以小写开头，通常以动词表示一个动作。
* 构造函数以大写开头，通常以名词表示被创建的内容。

### 使用`apply()`和`call()`方法

这两个方法的用途是显式指定任何一个对象，只是调用方法上对参数的引用形式略有区别，call是直接使用参数列表，而apply则是将参数打包成一个数组使用。





